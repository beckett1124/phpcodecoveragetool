<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Spike PHPCoverage Details: usherlogger.php</title> 
    <link href="../../../../..//css/spikesource.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="pageBox" >

      <table border="0" cellpadding="2" cellspacing="0" id="contentBox" width="100%">
        <tr>
          <td align="left" valign="top"><h1>Spike PHPCoverage Details: usherlogger.php</h1>
          </td>
        </tr>
        <tr>
          <td>

<table width="100%" border="0" cellpadding="2" cellspacing="0"><td width="10%"class="coverageDetailsHead" >Line #</td><td width="10%" class="coverageDetailsHead">Frequency</td><td  width="80%" class="coverageDetailsHead">Source Line</td><tr><td class="coverageDetails"><span>1</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&lt;?php</span></code></td></tr><tr><td class="coverageDetails"><span>2</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>3</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>class&nbsp;UsherLogger&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span>4</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;protected&nbsp;$dbh;</span></code></td></tr><tr><td class="coverageDetails"><span>5</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;$elapsed_time,&nbsp;$request_method,&nbsp;$webserver_addr,&nbsp;$remote_addr;</span></code></td></tr><tr><td class="coverageDetails"><span>6</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;$user_agent,&nbsp;$uri,&nbsp;$request_body,&nbsp;$response_headers,&nbsp;$response_body;</span></code></td></tr><tr><td class="coverageDetails"><span>7</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;$uvs_id;</span></code></td></tr><tr><td class="coverageDetails"><span>8</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;//&nbsp;In&nbsp;the&nbsp;future,&nbsp;$logentry&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;log&nbsp;arbitrary&nbsp;data&nbsp;in&nbsp;the&nbsp;form</span></code></td></tr><tr><td class="coverageDetails"><span>9</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;//&nbsp;of&nbsp;an&nbsp;array.</span></code></td></tr><tr><td class="coverageDetails"><span>10</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;//&nbsp;$_logger-&gt;logentry['cool_function']&nbsp;=&nbsp;array(</span></code></td></tr><tr><td class="coverageDetails"><span>11</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;'user'&nbsp;=&gt;&nbsp;'Joe',</span></code></td></tr><tr><td class="coverageDetails"><span>12</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;'location'&nbsp;=&gt;&nbsp;array('lat'&nbsp;=&gt;&nbsp;23.5,&nbsp;'long'&nbsp;=&gt;&nbsp;14.2)</span></code></td></tr><tr><td class="coverageDetails"><span>13</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;//&nbsp;);</span></code></td></tr><tr><td class="coverageDetails"><span>14</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;$logentry;</span></code></td></tr><tr><td class="coverageDetails"><span>15</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>16</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;function&nbsp;__construct($dbh)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">17</span></td><td class="coverageDetails"><span class="codeExecuted">9</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;dbh&nbsp;=&nbsp;$dbh;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">18</span></td><td class="coverageDetails"><span class="codeExecuted">9</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;logentry&nbsp;=&nbsp;array();</span></code></td></tr><tr><td class="coverageDetails"><span>19</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>20</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>21</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;//&nbsp;You&nbsp;should&nbsp;only&nbsp;call&nbsp;this&nbsp;once&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;request.</span></code></td></tr><tr><td class="coverageDetails"><span>22</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;function&nbsp;commit()&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">23</span></td><td class="coverageDetails"><span class="codeExecuted">9</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;$sth&nbsp;=&nbsp;$this-&gt;dbh-&gt;prepare(</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+24</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'INSERT&nbsp;INTO&nbsp;request_log&nbsp;'&nbsp;.</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+25</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(elapsed_time,&nbsp;request_method,&nbsp;webserver_addr,&nbsp;remote_addr,&nbsp;'&nbsp;.</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+26</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'user_agent,&nbsp;uri,&nbsp;request_body,&nbsp;response_headers,&nbsp;response_body,&nbsp;'&nbsp;.</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+27</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'uvs_id,&nbsp;logging_data)&nbsp;'&nbsp;.</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+28</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'VALUES&nbsp;'&nbsp;.</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+29</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(:elapsed_time,&nbsp;:request_method,&nbsp;:webserver_addr,&nbsp;:remote_addr,&nbsp;'&nbsp;.</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+30</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':user_agent,&nbsp;:uri,&nbsp;:request_body,&nbsp;:response_headers,&nbsp;:response_body,&nbsp;'&nbsp;.</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+31</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':uvs_id,&nbsp;:logging_data)'</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+32</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">33</span></td><td class="coverageDetails"><span class="codeExecuted">9</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute(array(</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+34</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':elapsed_time'&nbsp;=&gt;&nbsp;$this-&gt;elapsed_time,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+35</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':request_method'&nbsp;=&gt;&nbsp;$this-&gt;request_method,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+36</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':webserver_addr'&nbsp;=&gt;&nbsp;$this-&gt;webserver_addr,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+37</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':remote_addr'&nbsp;=&gt;&nbsp;$this-&gt;remote_addr,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+38</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':user_agent'&nbsp;=&gt;&nbsp;$this-&gt;user_agent,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+39</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':uri'&nbsp;=&gt;&nbsp;$this-&gt;uri,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+40</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':request_body'&nbsp;=&gt;&nbsp;$this-&gt;request_body,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+41</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':response_headers'&nbsp;=&gt;&nbsp;implode(&quot;\n&quot;,&nbsp;$this-&gt;response_headers),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+42</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':response_body'&nbsp;=&gt;&nbsp;$this-&gt;response_body,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+43</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':uvs_id'&nbsp;=&gt;&nbsp;$this-&gt;uvs_id,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+44</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;':logging_data'&nbsp;=&gt;&nbsp;json_encode($this-&gt;logentry)</span></code></td></tr><tr><td class="coverageDetails"><span class="codeExecuted">+45</span></td><td class="coverageDetails"><span class="codeExecuted">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeExecuted">&nbsp;&nbsp;&nbsp;&nbsp;));</span></code></td></tr><tr><td class="coverageDetails"><span>46</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>47</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>}</span></code></td></tr></table></td></tr>
  </table>

    </div>
  </body>
</html>
