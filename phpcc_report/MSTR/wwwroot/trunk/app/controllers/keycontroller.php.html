<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Spike PHPCoverage Details: keycontroller.php</title> 
    <link href="../../../../..//css/spikesource.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="pageBox" >

      <table border="0" cellpadding="2" cellspacing="0" id="contentBox" width="100%">
        <tr>
          <td align="left" valign="top"><h1>Spike PHPCoverage Details: keycontroller.php</h1>
          </td>
        </tr>
        <tr>
          <td>

<table width="100%" border="0" cellpadding="2" cellspacing="0"><td width="10%"class="coverageDetailsHead" >Line #</td><td width="10%" class="coverageDetailsHead">Frequency</td><td  width="80%" class="coverageDetailsHead">Source Line</td><tr><td class="coverageDetails"><span>1</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&lt;?php</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">2</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">define(&quot;ASSET_TYPE_KEY&quot;,&nbsp;&quot;K&quot;);</span></code></td></tr><tr><td class="coverageDetails"><span>3</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>4</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>class&nbsp;KeyController&nbsp;extends&nbsp;FWController&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span>5</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>6</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;function&nbsp;all()&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">7</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$keys&nbsp;=&nbsp;Array(</span></code></td></tr><tr><td class="coverageDetails"><span>8</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;Elevator&nbsp;1&quot;,&nbsp;&quot;Tbf1HO3NY1I2N1w==:15064:5a8f966cd7&quot;,&nbsp;0,&nbsp;&quot;Elevators&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>9</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;Elevator&nbsp;2&quot;,&nbsp;&quot;TFjoE0SzboOGg0g==:15064:4442d867f6&quot;,&nbsp;0,&nbsp;&quot;Elevators&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>10</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;Elevator&nbsp;3&quot;,&nbsp;&quot;TTMNnTNSp5sYVWw==:15064:6942cb218c&quot;,&nbsp;0,&nbsp;&quot;Elevators&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>11</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;Elevator&nbsp;4&quot;,&nbsp;&quot;T-09j43ZNHtA-nQ==:15064:7807e41b81&quot;,&nbsp;0,&nbsp;&quot;Elevators&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>12</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;Elevator&nbsp;5&quot;,&nbsp;&quot;TiMuqG2HJEydvaw==:15064:3b40475bae&quot;,&nbsp;0,&nbsp;&quot;Elevators&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>13</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;Elevator&nbsp;6&quot;,&nbsp;&quot;T0eSMDGwkX4o3MQ==:15064:b688e6d623&quot;,&nbsp;0,&nbsp;&quot;Elevators&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">14</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;Demo&nbsp;Door&nbsp;-&nbsp;Deadbolt&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;Tv2Kfd4kFT2Kj1g==:15064:9d5ffa8c91&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+15</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;Demo&nbsp;Door&nbsp;-&nbsp;Standard&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TEsTlGnpNv8lGlg==:15064:dd0097e342&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+16</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;6th&nbsp;N.&nbsp;Lobby&quot;,&nbsp;&quot;Tb7Vw7U7lbyRpUg==:15064:a8e6ddfce7&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+17</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;6th&nbsp;S.&nbsp;Lobby&quot;,&nbsp;&quot;TC0gq-AyNbNshiA==:15064:05e7c1bf2e&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+18</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;6th&nbsp;Stair&nbsp;A&quot;,&nbsp;&quot;T7DSREXao5DmMxg==:15064:183a51235f&quot;,&nbsp;1),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+19</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;6th&nbsp;Stair&nbsp;B&quot;,&nbsp;&quot;TC5ltmUXaM3V2Hw==:15064:b8630d467e&quot;,&nbsp;1),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+20</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;8th&nbsp;N.&nbsp;Lobby&quot;,&nbsp;&quot;TxqNv3kjAH3_vIA==:15064:0ad8f217dc&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+21</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;8th&nbsp;S.&nbsp;Lobby&quot;,&nbsp;&quot;TLZpG1tmbf3XyxQ==:15064:96b78cf403&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+22</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;9th&nbsp;N.&nbsp;Lobby&quot;,&nbsp;&quot;TbabgFY1SP2CNYA==:15064:b80c4e1524&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+23</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;9th&nbsp;S.&nbsp;Lobby&quot;,&nbsp;&quot;TFOVpXuKdGj-PSQ==:15064:778954092e&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+24</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;10th&nbsp;N.&nbsp;Lobby&quot;,&nbsp;&quot;TmX8n6uC26c_esQ==:15064:a7fe5606c4&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+25</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;10th&nbsp;S.&nbsp;Lobby&quot;,&nbsp;&quot;TZy8-q7r8ty9XxA==:15064:b14f2b65bc&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+26</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;11th&nbsp;N.&nbsp;Lobby&quot;,&nbsp;&quot;T9IczUPbMuw8Eug==:15064:b496591f29&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+27</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;11th&nbsp;S.&nbsp;Lobby&quot;,&nbsp;&quot;TTAVr99MvbTnoIw==:15064:7564538971&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+28</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;12th&nbsp;N.&nbsp;Lobby&quot;,&nbsp;&quot;TaK2fOGNs3mltuQ==:15064:3fd3e481c6&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+29</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;12th&nbsp;S.&nbsp;Lobby&quot;,&nbsp;&quot;TgMO6vl4BdmIdpQ==:15064:4ec483de74&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+30</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1408&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;T5HZPkGn9SS6UEA==:15064:254e661272&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+31</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1411&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TjxIwyShQQHcInQ==:15064:ee70dc5c21&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+32</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1412&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TwDHru8AYSzQpYg==:15064:df06656bd3&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+33</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1413&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;Taa_0SCkBR_Upkw==:15064:50ff9bc390&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+34</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1414&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TdYTsJfpBTBGCmA==:15064:e8b86a3487&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+35</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1415&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TjOY0JuPp8KJ53A==:15064:1bc97f8beb&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+36</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1416&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TCNPS-_dlWITdgQ==:15064:dc0483ca97&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+37</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1420&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;Tj6hg849PMtH0-Q==:15064:eb3a451eca&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+38</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1421&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;T9qQppAvKHJ9eGA==:15064:3f5831ab00&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+39</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1422&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TdLzZMVdiwbdCYA==:15064:cfa7d6518d&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+40</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1423&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TFp7J9bM7MJ8mdQ==:15064:c0e4b7f1a7&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+41</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1424&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;THx9EFAxm5xu9zA==:15064:0bebddbe67&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+42</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;1426&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TFwd9Favm18601w==:15064:cb85e91412&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+43</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;N.&nbsp;Lobby&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;T7VCW2MqI-z83dQ==:15064:ce152c093e&quot;,&nbsp;1),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+44</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;S.&nbsp;Lobby&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;TSuULL5npoUieCg==:15064:835158167f&quot;,&nbsp;1),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+45</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;P1&nbsp;Entry&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;Tl0KB9lS6tvedDw==:15064:0d793c8e73&quot;,1),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+46</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;P1&nbsp;Exit&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&quot;T3WBUwMvEtcbGQw==:15064:a6948da8f4&quot;,1),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+47</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;10th&nbsp;Flr&nbsp;E.&nbsp;Stairwell&quot;,&nbsp;&quot;TkAdRF6wCZmNc1A==:15064:a17c2ff59e&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+48</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;10th&nbsp;Flr&nbsp;W.&nbsp;Stairwell&quot;,&nbsp;&quot;THlxWRdc0peWSqg==:15064:fb3cfb4e4d&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+49</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;11th&nbsp;Flr&nbsp;E.&nbsp;Stairwell&quot;,&nbsp;&quot;T7J3aOj3obxT0VA==:15064:03572e14f5&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+50</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;11th&nbsp;Flr&nbsp;W.&nbsp;Stairwell&quot;,&nbsp;&quot;TUgTtxqJtyidpJw==:15064:9489640918&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+51</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Flr&nbsp;Stairwell&nbsp;A&quot;,&nbsp;&quot;T0-tbywC_3UYkrg==:15064:a82be924dd&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+52</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;14th&nbsp;Stairwell&nbsp;B&quot;,&nbsp;&quot;TmJz9AeRgj3r97g==:15064:16655baaf3&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+53</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;P3&nbsp;Lane&nbsp;2&nbsp;Entry&quot;,&nbsp;&quot;T0UeMbCywYf4OIA==:15064:a1067b9f36&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+54</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;P3&nbsp;Lane&nbsp;1&nbsp;Entry&quot;,&nbsp;&quot;TebHzURKNj5Ep-Q==:15064:49cdbf0fcf&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+55</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;P3&nbsp;Lane&nbsp;3&nbsp;Exit&quot;,&nbsp;&quot;TV--tFk_fdnaVIA==:15064:2aede73c48&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+56</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;P3&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;Tv3EF3OROYk7OeA==:15064:03961ae081&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+57</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;P3&nbsp;Lane&nbsp;2&nbsp;Exit&quot;,&nbsp;&quot;TWECXrF7wDOwC6A==:15064:e635e83d89&quot;,&nbsp;0),</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+58</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;HQ&nbsp;P1&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;Tte71FQ6YdWU4Ig==:15064:8601b46c9f&quot;,&nbsp;0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span>59</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>60</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>61</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span>62</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;Stairwell&nbsp;A&quot;,&nbsp;&quot;T7DSREXao5DmMxg==:15064:183a51235f&quot;,&nbsp;1,&nbsp;&quot;HQ&nbsp;6th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>63</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;Stairwell&nbsp;B&quot;,&nbsp;&quot;TC5ltmUXaM3V2Hw==:15064:b8630d467e&quot;,&nbsp;1,&nbsp;&quot;HQ&nbsp;6th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>64</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;North&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;Tb7Vw7U7lbyRpUg==:15064:a8e6ddfce7&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;6th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>65</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;South&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TC0gq-AyNbNshiA==:15064:05e7c1bf2e&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;6th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>66</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;North&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TxqNv3kjAH3_vIA==:15064:0ad8f217dc&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;8th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>67</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;South&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TLZpG1tmbf3XyxQ==:15064:96b78cf403&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;8th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>68</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;North&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TbabgFY1SP2CNYA==:15064:b80c4e1524&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;9th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>69</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;South&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TFOVpXuKdGj-PSQ==:15064:778954092e&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;9th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>70</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;North&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TmX8n6uC26c_esQ==:15064:a7fe5606c4&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;10th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>71</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;South&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TZy8-q7r8ty9XxA==:15064:b14f2b65bc&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;10th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>72</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;North&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;T9IczUPbMuw8Eug==:15064:b496591f29&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;11th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>73</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;South&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TTAVr99MvbTnoIw==:15064:7564538971&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;11th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>74</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;North&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TaK2fOGNs3mltuQ==:15064:3fd3e481c6&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;12th&nbsp;Floor&quot;),</span></code></td></tr><tr><td class="coverageDetails"><span>75</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;South&nbsp;Elevator&nbsp;Lobby&quot;,&nbsp;&quot;TgMO6vl4BdmIdpQ==:15064:4ec483de74&quot;,&nbsp;0,&nbsp;&quot;HQ&nbsp;12th&nbsp;Floor&quot;)</span></code></td></tr><tr><td class="coverageDetails"><span>76</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;);</span></code></td></tr><tr><td class="coverageDetails"><span>77</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">78</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$uvs_access_token&nbsp;=&nbsp;$_GET[&quot;uvs_access_token&quot;];</span></code></td></tr><tr><td class="coverageDetails"><span>79</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">80</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;User::find_by_uvs_token($uvs_access_token);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">81</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$user)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">82</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;ControllerInvalidTokenException('Invalid&nbsp;uvs&nbsp;access&nbsp;token');</span></code></td></tr><tr><td class="coverageDetails"><span>83</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>84</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">85</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$uvs_id&nbsp;=&nbsp;$user-&gt;get_uvs_id();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">86</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$badge&nbsp;=&nbsp;Badge::find_by_uvs_id($uvs_id,&nbsp;15064);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">87</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$badge)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">88</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Array();</span></code></td></tr><tr><td class="coverageDetails"><span>89</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>90</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>91</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">92</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;Array();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">93</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($keys&nbsp;as&nbsp;$key_info)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">94</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;=&nbsp;new&nbsp;stdClass();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">95</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key-&gt;name&nbsp;=&nbsp;$key_info[0];</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">96</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key-&gt;badge_id&nbsp;=&nbsp;$badge[0]-&gt;get_id();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">97</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key-&gt;key_data&nbsp;=&nbsp;$key_info[1];</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">98</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key-&gt;recommended&nbsp;=&nbsp;$key_info[2];</span></code></td></tr><tr><td class="coverageDetails"><span>99</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key-&gt;group_name&nbsp;=&nbsp;$key_info[3];</span></code></td></tr><tr><td class="coverageDetails"><span>100</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">101</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response[]&nbsp;=&nbsp;$key;</span></code></td></tr><tr><td class="coverageDetails"><span>102</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>103</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">104</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$response;</span></code></td></tr><tr><td class="coverageDetails"><span>105</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>106</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>107</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;function&nbsp;shared($args)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">108</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$uvs_access_token&nbsp;=&nbsp;$_GET[&quot;uvs_access_token&quot;];</span></code></td></tr><tr><td class="coverageDetails"><span>109</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">110</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;User::find_by_uvs_token($uvs_access_token);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">111</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$user)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">112</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;ControllerInvalidTokenException('Invalid&nbsp;uvs&nbsp;access&nbsp;token');</span></code></td></tr><tr><td class="coverageDetails"><span>113</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>114</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">115</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$shared_keys&nbsp;=&nbsp;Key::find_shared($user-&gt;get_uvs_id());</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">116</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$valid_keys=Array();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">117</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($shared_keys&nbsp;as&nbsp;$shared_key)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">118</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$shared_with_user&nbsp;=&nbsp;User::find_by_uvs_id($shared_key-&gt;shared_with);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">119</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($shared_with_user){</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">120</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$shared_key-&gt;shared_with&nbsp;=&nbsp;$shared_with_user-&gt;get_basic_info();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">121</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$valid_keys[]=$shared_key;</span></code></td></tr><tr><td class="coverageDetails"><span>122</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>123</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">124</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$valid_keys;</span></code></td></tr><tr><td class="coverageDetails"><span>125</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>126</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>127</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;function&nbsp;received($args)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">128</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$uvs_access_token&nbsp;=&nbsp;$_GET[&quot;uvs_access_token&quot;];</span></code></td></tr><tr><td class="coverageDetails"><span>129</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">130</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;User::find_by_uvs_token($uvs_access_token);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">131</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$user)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">132</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;ControllerInvalidTokenException('Invalid&nbsp;uvs&nbsp;access&nbsp;token');</span></code></td></tr><tr><td class="coverageDetails"><span>133</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>134</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">135</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$shared_keys&nbsp;=&nbsp;Key::find_received($user-&gt;get_uvs_id());</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">136</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$valid_keys=Array();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">137</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($shared_keys&nbsp;as&nbsp;$shared_key)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">138</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$shared_by_user&nbsp;=&nbsp;User::find_by_uvs_id($shared_key-&gt;shared_by);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">139</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($shared_by_user){</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">140</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$shared_key-&gt;shared_by&nbsp;=&nbsp;$shared_by_user-&gt;get_basic_info();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">141</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$valid_keys[]=$shared_key;</span></code></td></tr><tr><td class="coverageDetails"><span>142</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span>143</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span>144</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span>145</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">146</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$valid_keys;</span></code></td></tr><tr><td class="coverageDetails"><span>147</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>148</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>149</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;function&nbsp;activate($args)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">150</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;request-&gt;get_method()&nbsp;!=&nbsp;'GET')&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">151</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;ControllerBadRequestException('Must&nbsp;use&nbsp;GET');</span></code></td></tr><tr><td class="coverageDetails"><span>152</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">153</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$uvs_access_token&nbsp;=&nbsp;$_GET[&quot;uvs_access_token&quot;];</span></code></td></tr><tr><td class="coverageDetails"><span>154</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span>155</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;//Note:&nbsp;trace&nbsp;performance</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">156</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$logentry&nbsp;=&nbsp;Logentry::getInstance();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">157</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$logentry-&gt;log_main(&quot;key&quot;,&nbsp;&quot;activate&quot;,&nbsp;&quot;all&nbsp;elapse&nbsp;time&quot;);</span></code></td></tr><tr><td class="coverageDetails"><span>158</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">159</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;User::find_by_uvs_token($uvs_access_token);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">160</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$user)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">161</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;ControllerInvalidTokenException('Invalid&nbsp;uvs&nbsp;access&nbsp;token');</span></code></td></tr><tr><td class="coverageDetails"><span>162</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">163</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$qr_code&nbsp;=&nbsp;implode(&quot;/&quot;,&nbsp;$args);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">164</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$QR_format&nbsp;=&nbsp;$qr_code[0];</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">165</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($QR_format&nbsp;==&nbsp;'T')&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">166</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$logentry-&gt;start_sub(&quot;user&quot;,&nbsp;&quot;activate&quot;,&nbsp;&quot;process_tag_qr&nbsp;for&nbsp;QR=T&quot;);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">167</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;Util::process_tag_qr($qr_code,&nbsp;$user-&gt;get_uvs_id());</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">168</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$logentry-&gt;end_sub();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">169</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;($QR_format&nbsp;==&nbsp;'K')&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">170</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$logentry-&gt;start_sub(&quot;user&quot;,&nbsp;&quot;activate&quot;,&nbsp;&quot;process_tag_qr&nbsp;for&nbsp;QR=K&quot;);</span></code></td></tr><tr><td class="coverageDetails"><span>171</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Shared&nbsp;key&nbsp;processing</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">172</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$received_key_id&nbsp;=&nbsp;(int)&nbsp;substr($qr_code,&nbsp;1);</span></code></td></tr><tr><td class="coverageDetails"><span>173</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">174</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($received_key_id&nbsp;&gt;&nbsp;0)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span>175</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">176</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$received_key_id&nbsp;=&nbsp;(int)&nbsp;$received_key_id;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">177</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list($key)&nbsp;=&nbsp;Key::find_received($user-&gt;get_uvs_id(),&nbsp;$received_key_id);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">178</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($key)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">179</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$qr_code&nbsp;=&nbsp;$key-&gt;key_data;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">180</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$shared_by_uvs_id&nbsp;=&nbsp;$key-&gt;shared_by;</span></code></td></tr><tr><td class="coverageDetails"><span>181</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">182</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;Util::process_tag_qr($qr_code,&nbsp;$shared_by_uvs_id,&nbsp;null,&nbsp;null,&nbsp;$user-&gt;get_uvs_id());</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">183</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$logentry-&gt;end_sub();</span></code></td></tr><tr><td class="coverageDetails"><span>184</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>185</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>186</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">187</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$response)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">188</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;new&nbsp;stdClass();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">189</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;status&nbsp;=&nbsp;&quot;invalid&quot;;</span></code></td></tr><tr><td class="coverageDetails"><span>190</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">191</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$response;</span></code></td></tr><tr><td class="coverageDetails"><span>192</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>193</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>194</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;public&nbsp;function&nbsp;share($args)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">195</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$uvs_access_token&nbsp;=&nbsp;$_GET[&quot;uvs_access_token&quot;];</span></code></td></tr><tr><td class="coverageDetails"><span>196</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">197</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$user&nbsp;=&nbsp;User::find_by_uvs_token($uvs_access_token);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">198</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$user)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">199</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;ControllerInvalidTokenException('Invalid&nbsp;uvs&nbsp;access&nbsp;token');</span></code></td></tr><tr><td class="coverageDetails"><span>200</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">201</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$qr_code&nbsp;=&nbsp;implode(&quot;/&quot;,&nbsp;$args);</span></code></td></tr><tr><td class="coverageDetails"><span>202</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">203</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;list($session_id,&nbsp;$org_id,&nbsp;$qr_checksum,&nbsp;$shared_by,&nbsp;$valid_from,&nbsp;$valid_until)&nbsp;=&nbsp;explode(&quot;:&quot;,&nbsp;$qr_code);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">204</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$shared_by&nbsp;=&nbsp;(int)$shared_by;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">205</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$tag_type&nbsp;=&nbsp;$session_id[0];</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">206</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$session_id&nbsp;=&nbsp;substr($session_id,&nbsp;1);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">207</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$tag_str&nbsp;=&nbsp;&quot;$session_id:$org_id:$qr_checksum&quot;;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">208</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$key_data&nbsp;=&nbsp;$tag_type&nbsp;.&nbsp;$tag_str;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">209</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;new&nbsp;stdClass();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">210</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!Tag::validate_qr_str($tag_str))&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">211</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;status=&quot;invalid&quot;;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">212</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$response;</span></code></td></tr><tr><td class="coverageDetails"><span>213</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>214</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">215</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;Tag::find_valid($session_id);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">216</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!$tag)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">217</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;status=&quot;invalid&quot;;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">218</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$response;</span></code></td></tr><tr><td class="coverageDetails"><span>219</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">220</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($key_data&nbsp;&amp;&amp;&nbsp;$shared_by&nbsp;&amp;&amp;&nbsp;$valid_from&nbsp;&amp;&amp;&nbsp;$valid_until)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">221</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;=&nbsp;Key::save_shared_key(</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+222</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array(&quot;name&quot;&nbsp;=&gt;&nbsp;$tag-&gt;get_resource_name(),&nbsp;&quot;key_data&quot;&nbsp;=&gt;&nbsp;$key_data,&nbsp;&quot;shared_by&quot;&nbsp;=&gt;&nbsp;$shared_by,</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+223</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;shared_with&quot;&nbsp;=&gt;&nbsp;$user-&gt;get_uvs_id(),&nbsp;&quot;valid_from&quot;&nbsp;=&gt;&nbsp;$valid_from,&nbsp;&quot;valid_until&quot;&nbsp;=&gt;&nbsp;$valid_until</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+224</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">+225</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></code></td></tr><tr><td class="coverageDetails"><span>226</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">227</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($key)&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span>228</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span>229</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">230</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$shared_by_user&nbsp;=&nbsp;User::find_by_uvs_id($key-&gt;shared_by);</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">231</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key-&gt;shared_by&nbsp;=&nbsp;$shared_by_user-&gt;get_basic_info();</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">232</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key-&gt;status&nbsp;=&nbsp;&quot;ok&quot;;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">233</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$key;</span></code></td></tr><tr><td class="coverageDetails"><span>234</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">235</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;status=&quot;invalid&quot;;</span></code></td></tr><tr><td class="coverageDetails"><span class="codeMissed">236</span></td><td class="coverageDetails"><span class="codeMissed">&nbsp;</span></td><td class="coverageDetailsCode"><code><span class="codeMissed">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$response;</span></code></td></tr><tr><td class="coverageDetails"><span>237</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>238</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>&nbsp;&nbsp;}</span></code></td></tr><tr><td class="coverageDetails"><span>239</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>}</span></code></td></tr><tr><td class="coverageDetails"><span>240</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span></span></code></td></tr><tr><td class="coverageDetails"><span>241</span></td><td class="coverageDetails"><span>&nbsp;</span></td><td class="coverageDetailsCode"><code><span>?&gt;</span></code></td></tr></table></td></tr>
  </table>

    </div>
  </body>
</html>
